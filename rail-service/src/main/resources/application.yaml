#smallrye:
#  jwt:
#    verify:
#      key:
#        location: auth/publicKey.pem

mp:
  jwt:
    verify:
      audiences: com.hillayes
      issuer: https://hillayes.com/one-stop
      publickey:
        location: http://user-service:8080/api/v1/auth/jwks.json
    token:
      header: Cookie
      cookie: 'access_token'

smallrye:
  jwt:
    jwks:
      refresh-interval: 15
      forced-refresh-interval: 5

# configure production datasource
"%prod":
  quarkus:
    datasource:
      db-kind: postgresql
      #username: one-stop
      #password: password
      jdbc:
        url: jdbc:postgresql://db:5432/one-stop

quarkus:
  native:
    # defines which resources are included in native image
    resources:
      includes: auth/**

  flyway:
    migrate-at-start: true
    schemas: rails

  hibernate-orm:
    database:
      default-schema: rails

  rest-client:
    nordigen-api:
      url: https://ob.nordigen.com

  log:
    level: INFO
    console:
      format: "%d{yyyy-MM-dd HH:mm:ss,S} %-5p %X{correlationId} - [%c{3.}] (%t) %s%e%n"
    category:
      "com.hillayes":
        level: DEBUG

one-stop:
  # callback-url: /api/v1/rails/consents/accepted

  countries:
    - id: GB
      name: Great Britain
    - id: DE
      name: Germany
    - id: FR
      name: France
    - id: IT
      name: Italy

  xsrf:
    cookie-name: 'XSRF-TOKEN'
    header-name: 'X-XSRF-TOKEN'
    duration-secs: 1800
    # secret: 'this will be passed in'
