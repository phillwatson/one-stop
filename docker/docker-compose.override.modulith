volumes:
  pgadmin-data:

services:
  pgadmin:
    image: dpage/pgadmin4:7.8
    ports:
      - 5433:80
    networks:
      - onestop-db-network
    environment:
      PGADMIN_DEFAULT_EMAIL: watson.phill@gmail.com
      PGADMIN_DEFAULT_PASSWORD: password
    depends_on:
      - db
    volumes:
      - type: volume
        source: pgadmin-data
        target: /var/lib/pgadmin

  one-stop-service:
    image: one-stop/one-stop-main:1.0.0-SNAPSHOT
    ports:
      - "8081:8080"
      - "5001:5005"
    environment:
      QUARKUS_LOG_LEVEL: "INFO"
      QUARKUS_LOG_CATEGORY__COM_HILLAYES__LEVEL: DEBUG
      QUARKUS_HIBERNATE_ORM_LOG_SQL: "false"
      QUARKUS_HIBERNATE_ORM_LOG_BIND_PARAMETERS: "false"
      ONE_STOP_GATEWAY_SCHEME: "http"
      ONE_STOP_GATEWAY_OPEN_PORT: 9876
      ONE_STOP_AUTH_XSRF_SECRET: "this is a secret for xsrf tokens"
      ONE_STOP_AUTH_OPENID_GOOGLE_CLIENT_SECRET: "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"
      ONE_STOP_AUTH_OPENID_GITHUB_CLIENT_SECRET: "59dd08346b0fdef6cb1943e2d6b01b3be41f2e6f"
      ONE_STOP_AUTH_OPENID_GITLAB_CLIENT_SECRET: "be03626fe29f9c5ccf0820ad928e1f8a15df312bbf1582b309883a2678dfddd6"
      ONE_STOP_AUTH_OPENID_APPLE_KEY_ID: "my-apple-key-id"
      ONE_STOP_AUTH_OPENID_APPLE_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nMEECAQ...YGZQ0MpZkAQ==\n-----END PRIVATE KEY-----"
      ONE_STOP_NORDIGEN_SECRET_ID: "e9309cfc43cf4fa29a5697e39d537f88"
      ONE_STOP_NORDIGEN_SECRET_KEY: "8653cbfc8a44db2478481dbac92b274065dee8b04b73a4bd3987a2883e3ec91be9334bbefcdb15acb5105d554f5e7403c3f12f3b1c595a1a0857bdb24622f014"
      ONE_STOP_YAPILY_SECRET_ID: "8e041d63-98e5-4596-a9f4-9248d875467f"
      ONE_STOP_YAPILY_SECRET_KEY: "uQMmFzoP5jl03q2PJgDxkMK7MXGurRNJ"
      ONE_STOP_EMAIL_DISABLED: "false"
      ONE_STOP_EMAIL_API_KEY: "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"

  client:
    image: one-stop/client:1.0.0-SNAPSHOT
    build:
      context: ./client
